(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,n){e.exports=n(36)},27:function(e,t,n){},34:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var o=n(1),a=n.n(o),r=n(20),c=n.n(r),u=n(11),i=n(7),s=n(8),l=n(10),f=n(9),h=n(5),d=n(17),m="https://reactnd-books-api.udacity.com",p=localStorage.token;p||(p=localStorage.token=Math.random().toString(36).substr(-8));var v={Accept:"application/json",Authorization:p},b=function(e,t){return fetch("".concat(m,"/books/").concat(e.id),{method:"PUT",headers:Object(d.a)({},v,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},k=function(e){return fetch("".concat(m,"/search"),{method:"POST",headers:Object(d.a)({},v,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})};n(27);function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Object(f.a)(this,n)}}var g=function(e){Object(l.a)(n,e);var t=y(n);function n(){var e;Object(i.a)(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={shelf:""},e.handleChange=function(t){var n=t.target.value;e.setState(function(){return{shelf:n}}),e.handleSubmit(n)},e.handleSubmit=function(t){var n=e.props.book;e.props.onAddBook(n,t)},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.book.shelf?this.setState(function(){return{shelf:e.props.book.shelf}}):this.setState(function(){return{shelf:"none"}})}},{key:"render",value:function(){var e=this.props.book,t=[];t=e.imageLinks?e.imageLinks.smallThumbnail:"https://img.favpng.com/19/10/9/question-mark-symbol-sign-computer-icons-png-favpng-T3t3e8dw8dHkGeyPW3MKvVewM.jpg";var n="";return n=e.authors?e.authors.join(", "):"Unknown",a.a.createElement("div",{className:"book"},a.a.createElement("div",{className:"book-top"},a.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(t,")")}}),a.a.createElement("div",{className:"book-shelf-changer"},a.a.createElement("form",{onSubmit:this.handleSubmit},a.a.createElement("select",{value:this.state.shelf,onChange:this.handleChange},a.a.createElement("option",{value:"move",disabled:!0},"Move to..."),a.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),a.a.createElement("option",{value:"wantToRead"},"Want to Read"),a.a.createElement("option",{value:"read"},"Read"),a.a.createElement("option",{value:"none"},"None"))))),a.a.createElement("div",{className:"book-title"},e.title),a.a.createElement("div",{className:"book-authors"},n))}}]),n}(o.Component);function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Object(f.a)(this,n)}}var j=function(e){Object(l.a)(n,e);var t=E(n);function n(){var e;Object(i.a)(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).onAddBook=function(t,n){e.props.onAddBook(t,n)},e}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.books,o=t.category,r="";return r="currentlyReading"===o.name?"Currently Reading":"wantToRead"===o.name?"Want To Read":"Read",a.a.createElement("div",null,a.a.createElement("div",{className:"bookshelf"},a.a.createElement("h2",{className:"bookshelf-title"},r),a.a.createElement("div",{className:"bookshelf-books"},a.a.createElement("ol",{className:"books-grid"},n.filter(function(e){return e.shelf===o.name}).map(function(t){return a.a.createElement("li",{key:t.id},a.a.createElement(g,{book:t,onAddBook:e.onAddBook}))})))),a.a.createElement("div",{className:"open-search"},a.a.createElement(u.b,{to:"/search",className:"open-search-button"},"Add a book")))}}]),n}(o.Component);function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Object(f.a)(this,n)}}var R=function(e){Object(l.a)(n,e);var t=O(n);function n(){var e;Object(i.a)(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={query:"",showingBooksSearch:[]},e.updateQuery=function(t){e.setState(function(){return{query:t}}),e.updateSearch(t)},e.updateSearch=function(t){var n=[];t?k(t).then(function(t){if("empty query"===t.error)e.setState(function(){return{showingBooksSearch:[]}});else{var o=e.props.books,a=t,r=o.map(function(e){return e.id}),c=a.map(function(e){return e.id}),u=a.filter(function(e){return!r.includes(e.id)}),i=o.filter(function(e){return c.includes(e.id)});n=i.concat(u),e.setState(function(){return{showingBooksSearch:n}})}}):(console.log("empty query"),e.setState(function(){return{showingBooksSearch:[]}}))},e.onAddBook=function(t,n){e.props.onAddBook(t,n)},e}return Object(s.a)(n,[{key:"handleSubmit",value:function(e){alert("Your favorite book is: "+e.book.title),e.preventDefault()}},{key:"render",value:function(){var e=this,t=this.state,n=t.query,o=t.showingBooksSearch;return a.a.createElement("div",{className:"search-books"},a.a.createElement("div",{className:"search-books-bar"},a.a.createElement(u.b,{className:"close-search",to:"/"},"Close"),a.a.createElement("div",{className:"search-books-input-wrapper"},a.a.createElement("input",{type:"text",placeholder:"Search by title or author",value:n,onChange:function(t){return e.updateQuery(t.target.value)}}))),a.a.createElement("div",{className:"search-books-results"},a.a.createElement("ol",{className:"books-grid"},o.map(function(t){return a.a.createElement("li",{key:t.id},a.a.createElement(g,{book:t,onAddBook:e.onAddBook}))}))))}}]),n}(o.Component),B=n(0);function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=Object(h.a)(e);if(t){var a=Object(h.a)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Object(f.a)(this,n)}}var N=[{name:"currentlyReading"},{name:"wantToRead"},{name:"read"}],w=function(e){Object(l.a)(n,e);var t=S(n);function n(){var e;Object(i.a)(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={books:[]},e.onAddBook=function(t,n){b(t,n).then(function(){e.componentDidMount()})},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(m,"/books"),{headers:v}).then(function(e){return e.json()}).then(function(e){return e.books}).then(function(t){e.setState(function(){return{books:t}})})}},{key:"render",value:function(){var e=this,t=this.state.books;return a.a.createElement("div",{className:"app"},a.a.createElement(B.a,{exact:!0,path:"/",render:function(){return a.a.createElement("div",{className:"list-books"},a.a.createElement("div",{className:"list-books-title"},a.a.createElement("h1",null,"MyReads")),a.a.createElement("div",{className:"list-books-content"},N.map(function(n){return a.a.createElement(j,{key:n.name,books:t,category:n,onAddBook:e.onAddBook})})))}}),a.a.createElement(B.a,{exact:!0,path:"/search",render:function(){return a.a.createElement(R,{onAddBook:e.onAddBook,books:t})}}))}}]),n}(a.a.Component);n(34);c.a.render(a.a.createElement(u.a,null,a.a.createElement(w,null)),document.getElementById("root"))}},[[22,2,1]]]);
//# sourceMappingURL=main.5c37250d.chunk.js.map
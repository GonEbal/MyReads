{"version":3,"sources":["BooksAPI.js","BookShelf.js","ListBooks.js","SearchBooks.js","App.js","index.js"],"names":["api","token","localStorage","Math","random","toString","substr","headers","Accept","Authorization","update","book","shelf","fetch","concat","id","method","Object","objectSpread","Content-Type","body","JSON","stringify","then","res","json","search","query","data","books","BookShelf","state","handleChange","event","value","target","_this","setState","handleSubmit","props","onAddBook","_this2","this","url","imageLinks","smallThumbnail","authors","join","react_default","a","createElement","className","style","width","height","backgroundImage","onSubmit","onChange","disabled","title","Component","ListBooks","_this$props","category","shelfName","name","filter","map","b","key","src_BookShelf","react_router_dom","to","SearchBooks","showingBooksSearch","updateQuery","updateSearch","new_array","BooksAPI","search_books","error","myBooks","searchBooks","myBooksIds","myBook","searchBooksIds","searchBook","searchBooksExcludingMine","includes","myBooksInSearch","console","log","alert","preventDefault","_this$state","type","placeholder","categories","BooksApp","componentDidMount","_this3","react_router","exact","path","render","src_ListBooks","src_SearchBooks","React","ReactDOM","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.5c37250d.chunk.js","sourcesContent":["\nconst api = \"https://reactnd-books-api.udacity.com\"\n\n\n// Generate a unique token for storing your bookshelf data on the backend server.\nlet token = localStorage.token\nif (!token)\n  token = localStorage.token = Math.random().toString(36).substr(-8)\n\nconst headers = {\n  'Accept': 'application/json',\n  'Authorization': token\n}\n\nexport const get = (bookId) =>\n  fetch(`${api}/books/${bookId}`, { headers })\n    .then(res => res.json())\n    .then(data => data.book)\n\nexport const getAll = () =>\n  fetch(`${api}/books`, { headers })\n    .then(res => res.json())\n    .then(data => data.books)\n\nexport const update = (book, shelf) =>\n  fetch(`${api}/books/${book.id}`, {\n    method: 'PUT',\n    headers: {\n      ...headers,\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ shelf })\n  }).then(res => res.json())\n\nexport const search = (query) =>\n  fetch(`${api}/search`, {\n    method: 'POST',\n    headers: {\n      ...headers,\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ query })\n  }).then(res => res.json())\n    .then(data => data.books)\n","import React, { Component } from 'react';\n\nclass BookShelf extends Component {\n\tstate = {\n\t    shelf: '',\n\t};\n\n\tcomponentDidMount() {\n\t\tif (this.props.book.shelf) {\n\t\t\tthis.setState(() => ({\n\t\t      shelf: this.props.book.shelf,\n\t\t    }));\n\t\t} else {\n\t\t\tthis.setState(() => ({\n\t\t      shelf: 'none',\n\t\t    }));\n\t\t}\n\t}\n\thandleChange = event => {\n\t\tconst { value } = event.target;\n\n\t    this.setState(() => ({\n\t      shelf: value,\n\t    }));\n\t    this.handleSubmit(value)\n\t  };\n\thandleSubmit = shelf => {\n\t\tconst book = this.props.book\n\t    this.props.onAddBook(book, shelf);\n\t  };\n\n\trender() {\n\t\tconst { book } = this.props\n\t\tlet url = []\n\t\tif (book.imageLinks) {\n\t\t\turl = book.imageLinks.smallThumbnail\n\t\t} else {\n\t\t\turl = 'https://img.favpng.com/19/10/9/question-mark-symbol-sign-computer-icons-png-favpng-T3t3e8dw8dHkGeyPW3MKvVewM.jpg'\n\t\t}\n\t\tlet authors = ''\n\t\tif (book.authors) {\n\t\t\tauthors = (book.authors).join(', ');\n\t\t} else {\n\t\t\tauthors = 'Unknown'\n\t\t}\n\t\treturn (\n\t\t\t<div className=\"book\">\n\t       \t <div className=\"book-top\">\n\t          \t<div className=\"book-cover\" style={{ width: 128, height: 193, backgroundImage: `url(${url})` }}></div>\n\t          \t<div className=\"book-shelf-changer\">\n\t          \t\t<form onSubmit={this.handleSubmit}>\n\t\t            \t<select value={this.state.shelf} onChange={this.handleChange}>\n\t\t\t              \t<option value=\"move\" disabled>Move to...</option>\n\t\t\t              \t<option value=\"currentlyReading\">Currently Reading</option>\n\t\t\t              \t<option value=\"wantToRead\">Want to Read</option>\n\t\t\t              \t<option value=\"read\">Read</option>\n\t\t\t              \t<option value=\"none\">None</option>\n\t\t            \t</select>\n\t            \t</form>\n\t          \t</div>\n\t        \t</div>\n\t        \t<div className=\"book-title\">{book.title}</div>\n\t        \t<div className=\"book-authors\">{authors}</div>\n\t      \t</div>\n      \t)\n\t}\n}\n\nexport default BookShelf","import React, { Component } from 'react';\nimport BookShelf from './BookShelf'\nimport { Link } from 'react-router-dom'\n\nclass ListBooks extends Component {\n  onAddBook = (book, shelf) => {\n    this.props.onAddBook(book, shelf);\n  };\n\n  render() {\n    const { books, category } = this.props\n    let shelfName = ''\n    if (category.name === 'currentlyReading') {\n      shelfName = 'Currently Reading'\n    } else if (category.name === 'wantToRead') {\n      shelfName = 'Want To Read'\n    } else {\n      shelfName = 'Read'\n    }\n    return (\n      <div>\n        <div className=\"bookshelf\">\n          <h2 className=\"bookshelf-title\">{shelfName}</h2>\n          <div className=\"bookshelf-books\">\n            <ol className=\"books-grid\">\n            {books.filter(book => book.shelf === category.name).map((b) => (\n              <li key={b.id}>\n                  <BookShelf\n                  book={b}\n                  onAddBook={this.onAddBook}\n                  />\n                </li>\n              ))}\n            </ol>\n          </div>\n        </div>\n        <div className=\"open-search\">\n          <Link\n          to='/search'\n          className='open-search-button'\n          >Add a book</Link>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default ListBooks","import React, { Component } from 'react';\nimport BookShelf from './BookShelf'\nimport * as BooksAPI from './BooksAPI'\nimport { Link } from 'react-router-dom'\n\nclass SearchBooks extends Component {\n\tstate = {\n\t\tquery: '',\n\t\tshowingBooksSearch: []\n\t}\n\tupdateQuery = (query) => {\n\t\tthis.setState(() => ({\n\t\t\tquery: query\n\t\t}))\n\t\tthis.updateSearch(query)\n\t}\n\thandleSubmit(data) {\n\t    alert('Your favorite book is: ' + data.book.title);\n\t    data.preventDefault();\n\t  }\n\tupdateSearch = (query) => {\n\t  \tlet new_array = []\n\n\t\tif (query) {\n    \tBooksAPI.search(query)\n\t  \t\t.then((search_books) => {\n\t  \t\t\tif (search_books.error === 'empty query') {\n\t  \t\t\t\t\tthis.setState(() => ({\n\t  \t\t\t\t\t\tshowingBooksSearch: []\n\t\t\t\t\t\t}))\n\t  \t\t\t\t} else {\n\n\t  \t\t\t\t\tconst myBooks = this.props.books;\n\t  \t\t\t\t\tconst searchBooks = search_books;\n\n\t  \t\t\t\t\tconst myBooksIds = myBooks.map(myBook => myBook.id);\n\t  \t\t\t\t\tconst searchBooksIds = searchBooks.map(searchBook => searchBook.id);\n\n\t  \t\t\t\t\tconst searchBooksExcludingMine = searchBooks.filter((searchBook) =>\n\t  \t\t\t\t\t\t!myBooksIds.includes(searchBook.id)\n\t  \t\t\t\t\t)\n\n\t  \t\t\t\t\tconst myBooksInSearch = myBooks.filter(myBook =>\n\t  \t\t\t\t\t\tsearchBooksIds.includes(myBook.id)\n\t  \t\t\t\t\t)\n\n\t  \t\t\t\t\tnew_array = myBooksInSearch.concat(searchBooksExcludingMine)\n\n\t  \t\t\t\t\tthis.setState(() => ({\n\t  \t\t\t\t\t\tshowingBooksSearch: new_array\n\n\t\t\t\t\t\t}))\n\t  \t\t\t\t}\n\t  \t\t})\n\t  \t} else {\n\t  \t\tconsole.log('empty query')\n\t  \t\tthis.setState(() => ({\n\t\t\t\tshowingBooksSearch: []\n\t\t}))\n\t  \t}\n\t}\n\tonAddBook = (book, shelf) => {\n\t\tthis.props.onAddBook(book, shelf);\n\t}\n\trender() {\n\t\tconst { query, showingBooksSearch } = this.state\n\n\t\treturn (\n\t\t\t<div className=\"search-books\">\n\t            <div className=\"search-books-bar\">\n\t              <Link\n\t              className=\"close-search\"\n\t              to='/'\n\t              >Close</Link>\n\t              <div className=\"search-books-input-wrapper\">\n\t                \t<input\n\t                \t\ttype=\"text\"\n\t                \t\tplaceholder=\"Search by title or author\"\n\t                \t\tvalue={query}\n\t                \t\tonChange={(event) => this.updateQuery(event.target.value)}\n\t                \t\t/>\n\n\t\t            </div>\n\t\t        </div>\n\t\t        <div className=\"search-books-results\">\n\t\t        \t<ol className=\"books-grid\">\n\t\t        \t\t{showingBooksSearch.map((book) => (\n\t\t        \t\t\t<li key={book.id}>\n\t\t        \t\t\t\t<BookShelf\n\t\t        \t\t\t\tbook={book}\n\t\t        \t\t\t\tonAddBook={this.onAddBook}\n\t\t        \t\t\t\t/>\n\t\t        \t\t\t</li>\n\t\t        \t\t))}\n\t\t        \t</ol>\n\t            </div>\n          </div>\n\t\t)\n\t}\n}\n\nexport default SearchBooks","import React from 'react'\nimport * as BooksAPI from './BooksAPI'\nimport './App.css'\nimport ListBooks from './ListBooks'\nimport SearchBooks from './SearchBooks'\nimport { Route } from 'react-router-dom'\n\nconst categories = [{ name: 'currentlyReading' }, { name: 'wantToRead' }, { name: 'read' }];\n\nclass BooksApp extends React.Component {\n  state = {\n    books: [],\n  }\n\n  componentDidMount() {\n    BooksAPI.getAll()\n      .then((books) => {\n        this.setState(() => ({\n          books\n        }))\n      })\n  }\n\n  onAddBook = (book, shelf) => {\n    BooksAPI.update(book, shelf)\n      .then(() => {\n        this.componentDidMount()\n      })\n  }\n\n  render() {\n    const { books } = this.state;\n    return (\n      <div className=\"app\">\n      <Route exact path='/' render={() => (\n          <div className=\"list-books\">\n            <div className=\"list-books-title\">\n              <h1>MyReads</h1>\n            </div>\n            <div className=\"list-books-content\">\n              {categories.map(category => (\n              <ListBooks\n                key = {category.name}\n                books={books}\n                category={category}\n                onAddBook={this.onAddBook}\n              />\n              ))}\n            </div>\n          </div>\n          )} />\n          <Route exact path='/search' render={() => (\n            <SearchBooks\n              onAddBook={this.onAddBook}\n              books={books}\n            />\n          )} />\n      </div>\n    )\n  }\n}\n\nexport default BooksApp\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter } from 'react-router-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n\t<BrowserRouter>\n\t\t<App />\n\t</BrowserRouter>, document.getElementById('root'))\n"],"sourceRoot":""}